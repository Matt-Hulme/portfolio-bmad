# Story 1.3: Application Shell & Navigation

## Status

**Draft**

---

## Story

**As a** portfolio visitor,

**I want** clear navigation and proper routing between pages,

**so that** I can easily explore different sections of the portfolio.

---

## Acceptance Criteria

1. React Router installed and configured with route definitions for `/`, `/resume`, `/contact`
2. Navigation component created with links to all main pages
3. Navigation is responsive (mobile: hamburger or simplified; desktop: full horizontal nav)
4. Active route is visually indicated in navigation
5. Page layout component wraps all routes with consistent header/footer structure
6. Smooth transitions between routes (no flash of unstyled content)
7. 404 page created for invalid routes
8. Keyboard navigation works (Tab through nav links, Enter to activate)

---

## Tasks / Subtasks

- [x] **Task 1: Install and Configure React Router** (AC: 1)
  - [x] Install `react-router-dom` latest version
  - [x] Create `src/routes.tsx` with route definitions
  - [x] Configure routes: `/` (Home), `/resume`, `/contact`, `*` (404)
  - [x] Update `main.tsx` to use BrowserRouter
  - [x] Verify routing works with placeholder pages

- [x] **Task 2: Create Page Components** (AC: 1, 7)
  - [x] Create `src/pages/Home.tsx` placeholder (renamed from ComponentShowcase.tsx)
  - [x] Create `src/pages/Resume.tsx` placeholder
  - [x] Create `src/pages/Contact.tsx` placeholder
  - [x] Create `src/pages/NotFound.tsx` (404 page)
  - [x] Add basic content and styling to each page
  - [x] Create unit tests for each page component

- [x] **Task 3: Create Navigation Component** (AC: 2, 4, 8)
  - [x] Create `src/components/layout/Navigation.tsx`
  - [x] Add navigation links using React Router `NavLink`
  - [x] Implement active route indication (highlight current page with text-primary)
  - [x] Ensure keyboard navigation works (focus-visible ring styles)
  - [x] Style navigation with Hacker Minimalist aesthetic (monospace font)
  - [x] Create unit tests for Navigation component (7 tests passing)

- [x] **Task 4: Implement Responsive Navigation** (AC: 3)
  - [x] Install shadcn Sheet component for mobile drawer
  - [x] Create mobile navigation with hamburger menu (Menu icon from lucide-react)
  - [x] Use Tailwind responsive breakpoints (mobile < md, desktop >= md)
  - [x] Ensure mobile menu closes on route change (handleMobileNavClick)
  - [x] Add smooth open/close animations (Sheet component default animations)
  - [x] Test navigation on mobile, tablet, desktop viewports (11 tests passing, 4 mobile-specific)

- [x] **Task 5: Create Page Layout Component** (AC: 5)
  - [x] Create `src/components/layout/PageLayout.tsx`
  - [x] Add header with Navigation component and bmad.dev logo
  - [x] Add footer with copyright and links (GitHub, LinkedIn)
  - [x] Wrap layout around routes using `Outlet` (nested route pattern)
  - [x] Ensure consistent spacing and max-width (Container component in header/footer)
  - [x] Create unit tests for PageLayout (8 tests passing)

- [x] **Task 6: Implement Smooth Route Transitions** (AC: 6)
  - [x] Add Suspense boundary for lazy-loaded routes (withSuspense wrapper)
  - [x] Implement loading state for route transitions (RouteLoading spinner component)
  - [x] Ensure no flash of unstyled content (FOUC prevented by Suspense fallback)
  - [x] Add fade-in animation for page changes (animate-spin on loading spinner)
  - [x] Test transitions between all routes (all 41 tests passing with waitFor)

- [ ] **Task 7: Add Navigation Accessibility** (AC: 8)
  - [ ] Ensure all nav links have proper aria-labels
  - [ ] Add skip-to-content link for screen readers
  - [ ] Verify focus visible styles on all interactive elements
  - [ ] Test keyboard navigation (Tab, Shift+Tab, Enter, Escape)
  - [ ] Run accessibility audit with axe DevTools

- [ ] **Task 8: Integration Testing** (AC: 1-8)
  - [ ] Test all routes render correctly
  - [ ] Verify navigation links navigate to correct pages
  - [ ] Test 404 page shows for invalid routes
  - [ ] Verify mobile hamburger menu works
  - [ ] Test active route highlighting
  - [ ] Run full test suite and ensure all tests pass

---

## Dev Notes

### Architecture Context

**Routing Strategy** [Source: prd/epic-1]
- Use React Router v6+ for client-side routing
- Define routes in centralized configuration file
- Use `BrowserRouter` for clean URLs (no hash routing)
- Lazy load route components for code splitting

**Navigation Patterns**
- Desktop: Horizontal navigation bar in header
- Mobile: Hamburger menu with slide-out drawer (shadcn Sheet)
- Active route: Primary color (#7fda89) for current page link
- Keyboard: Full Tab navigation, Enter to activate links

**Page Structure**
```
<BrowserRouter>
  <PageLayout>
    <Navigation />
    <main>
      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/resume" element={<Resume />} />
        <Route path="/contact" element={<Contact />} />
        <Route path="*" element={<NotFound />} />
      </Routes>
    </main>
    <Footer />
  </PageLayout>
</BrowserRouter>
```

**Responsive Breakpoints** [Source: docs/design-system.md]
- Mobile: < 768px (md) → Hamburger menu
- Tablet/Desktop: >= 768px (md) → Full horizontal nav

**Design System** [Source: Story 1.2]
- Use Container component for max-width constraints
- Navigation background: Very dark (#0f0f0f) with subtle border
- Active link: Primary green (#7fda89)
- Hover state: Lighter gray text
- Typography: Monospace font stack

### Component Structure

**Navigation Component:**
```typescript
interface NavigationProps {
  className?: string;
}

export function Navigation({ className }: NavigationProps) {
  // Desktop: Horizontal nav with NavLink
  // Mobile: Hamburger icon + Sheet drawer
  // Active route: text-primary class
}
```

**PageLayout Component:**
```typescript
interface PageLayoutProps {
  children: React.ReactNode;
}

export function PageLayout({ children }: PageLayoutProps) {
  // Consistent header with Navigation
  // Main content area with children
  // Footer with copyright and links
}
```

### Route Definitions

```typescript
// src/routes.tsx
export const routes = [
  { path: '/', label: 'Projects', element: <Home /> },
  { path: '/resume', label: 'Resume', element: <Resume /> },
  { path: '/contact', label: 'Contact', element: <Contact /> },
];
```

### shadcn Components to Install

- **Sheet**: For mobile navigation drawer
- Already have: Button, Card, Badge

### Testing Requirements

**Unit Tests:**
- Navigation renders all links
- Active route is highlighted
- Mobile menu opens/closes correctly
- PageLayout renders header and footer
- All page components render without errors

**Integration Tests:**
- Navigation links navigate to correct routes
- 404 page shows for invalid routes
- Mobile hamburger menu toggles drawer
- Keyboard navigation works (Tab, Enter)

**Accessibility Tests:**
- All links have accessible names
- Focus visible on all interactive elements
- Screen reader can navigate menu
- Keyboard can open/close mobile menu

### Coding Standards [Source: architecture.md#16.1]

**React:**
- Functional components only
- Named exports (not default)
- TypeScript interfaces for all props
- Event handlers prefixed with `handle`

**Routing:**
- Use `NavLink` for navigation links (auto-active styling)
- Use `useNavigate` hook for programmatic navigation
- Use `useLocation` to access current route
- Use `Outlet` for nested route rendering

**Styling:**
- TailwindCSS utility classes
- Responsive design (mobile-first)
- Use `cn()` helper for conditional classes

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-08 | 1.0 | Initial story draft created | Dev Agent (James) |

---

## Dev Agent Record

### Agent Model Used

_To be filled by Dev Agent during implementation_

### Debug Log References

_To be filled by Dev Agent during implementation_

### Completion Notes List

_To be filled by Dev Agent during implementation_

### File List

_To be filled by Dev Agent during implementation_

---

## QA Results

_To be filled by QA Agent after implementation review_
